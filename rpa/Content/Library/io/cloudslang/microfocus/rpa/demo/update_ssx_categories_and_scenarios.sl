########################################################################################################################
#!!
#! @description: Creates or updates (if existing) demo categories and scenarios.
#!
#! @input categories: A list of categories to be created or updated; each category contains name, description, background ID and icon ID. The name must be unique. Moreover, each category may contain 0 or more scenarios which will be also added under the given category.
#!!#
########################################################################################################################
namespace: io.cloudslang.microfocus.rpa.demo
flow:
  name: update_ssx_categories_and_scenarios
  inputs:
    - categories: "${'''\n  [\n    [\n      {\n        \"name\": \"AOS\",\n        \"description\": \"Advantage Online Shopping\",\n        \"backgroundId\": null,\n        \"iconId\": 200026\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"PURCHASE AN ITEM\",\n        \"description\": \"Shops for an item.\",\n        \"inputs\": [\n          {\n            \"label\": \"url\",\n            \"originalName\": \"url\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"http://rpa.mf-te.com:8080\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"username\",\n            \"originalName\": \"username\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"password\",\n            \"originalName\": \"password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"catalog\",\n            \"originalName\": \"catalog\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"item\",\n            \"originalName\": \"item\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          }\n        ],\n        \"outputs\": [\n          {\n            \"label\": \"price\",\n            \"originalName\": \"price\",\n            \"exposed\": true\n          }\n        ],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ],\n        \"flowVo\": {\n          \"flowUuid\": \"AOS.product.purchase.ui.buy_item\",\n          \"persistenceLevel\": \"STANDARD\",\n          \"timeoutValue\": 0,\n          \"flowPath\": \"Library/AOS/product/purchase/ui/buy_item.sl\"\n        }\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"REGISTER A USER\",\n        \"description\": \"Registers a single user in AOS\",\n        \"inputs\": [\n          {\n            \"label\": \"url\",\n            \"originalName\": \"url\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"http://rpa.mf-te.com:8080\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"username\",\n            \"originalName\": \"username\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": \"\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"password\",\n            \"originalName\": \"password\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"Cloud@123\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"first_name\",\n            \"originalName\": \"first_name\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": \"\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"last_name\",\n            \"originalName\": \"last_name\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": \"\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"email\",\n            \"originalName\": \"email\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"@microfocus.com\",\n            \"sources\": null,\n            \"separator\": null\n          }\n        ],\n        \"outputs\": [\n          {\n            \"label\": \"return_result\",\n            \"originalName\": \"return_result\",\n            \"exposed\": true\n          },\n          {\n            \"label\": \"error_message\",\n            \"originalName\": \"error_message\",\n            \"exposed\": true\n          }\n        ],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ],\n        \"flowVo\": {\n          \"flowUuid\": \"AOS.user.register.ui.register_user\",\n          \"persistenceLevel\": \"STANDARD\",\n          \"timeoutValue\": 0,\n          \"flowPath\": \"Library/AOS/user/register/ui/register_user.sl\"\n        }\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"REGISTER USERS\",\n        \"description\": \"Register users from an excel sheet using AOS UI.\",\n        \"inputs\": [\n          {\n            \"label\": \"excel_path\",\n            \"originalName\": \"excel_path\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"C:\\\\\\\\Enablement\\\\\\\\HotLabs\\\\\\\\AOS\\\\\\\\shopping_list.xlsx\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"sheet\",\n            \"originalName\": \"sheet\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"Users\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"login_header\",\n            \"originalName\": \"login_header\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"Username\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"password_header\",\n            \"originalName\": \"password_header\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"Password\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"name_header\",\n            \"originalName\": \"name_header\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"Full Name\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"email_header\",\n            \"originalName\": \"email_header\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"Email\",\n            \"sources\": null,\n            \"separator\": null\n          }\n        ],\n        \"outputs\": [],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ],\n        \"flowVo\": {\n          \"flowUuid\": \"AOS.user.register.ui.bulk.register_users_from_excel\",\n          \"persistenceLevel\": \"STANDARD\",\n          \"timeoutValue\": 0,\n          \"flowPath\": \"Library/AOS/user/register/ui/bulk/register_users_from_excel.sl\"\n        }\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"REMOVE USERS\",\n        \"description\": \"Removes given users directly from AOS DB. The user list must be enclosed in parenthesis, each user name must be enclosed in single quotes. Input ('daniel','michael') will remove two users - daniel and michael out of AOS DB.\",\n        \"inputs\": [\n          {\n            \"label\": \"login_name_list\",\n            \"originalName\": \"login_name_list\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"('daniel','michael')\",\n            \"sources\": null,\n            \"separator\": null\n          }\n        ],\n        \"outputs\": [\n          {\n            \"label\": \"deleted_users\",\n            \"originalName\": \"deleted_users\",\n            \"exposed\": true\n          }\n        ],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ],\n        \"flowVo\": {\n          \"flowUuid\": \"AOS.user.remove.db.bulk.remove_users\",\n          \"persistenceLevel\": \"STANDARD\",\n          \"timeoutValue\": 0,\n          \"flowPath\": \"Library/AOS/user/remove/db/bulk/remove_users.sl\"\n        }\n      }\n    ],\n    [\n      {\n        \"name\": \"HR\",\n        \"description\": \"Human Resources\",\n        \"backgroundId\": 200055,\n        \"iconId\": 200007\n      }\n    ],\n    [\n      {\n        \"name\": \"INSURANCE\",\n        \"description\": \"Insurance & Assurance\",\n        \"backgroundId\": 200070,\n        \"iconId\": 200005\n      }\n    ],\n    [\n      {\n        \"name\": \"IT\",\n        \"description\": \"Information Technology\",\n        \"backgroundId\": 200068,\n        \"iconId\": 200021\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"GENERATE ROI NUMBERS\",\n        \"description\": \"Schedules a set of dummy flows each generating certain (random) ROI and each to run specific (random) number of times. Once the scheduled flows finish, Central Dashboard and Insights shows demo data.\\\\n---\\\\ntrigger_expression = How often to trigger the flow. */60000 = every minute; */300000 = once per five minutes; */3600000 = every hour\\\\n---\\\\nnum_of_occurences_range = How many times to schedule each flow; provide a range of min-max value; each flow will be scheduled with a random number of occurrences within the range. 0-0 = scheduler will keep triggering it forever\\\\n---\\\\nroi_range = Return On Investment for each flow; provide a range of min-max value; each flow will get a random ROI in the range\",\n        \"flowVo\": {\n          \"flowPath\": \"Library/rpa/demo/generate_roi_numbers.sl\",\n          \"flowUuid\": \"rpa.demo.generate_roi_numbers\",\n          \"timeoutValue\": 0\n        },\n        \"inputs\": [\n          {\n            \"defaultValue\": \"Library/Micro Focus/Misc\",\n            \"label\": \"path\",\n            \"originalName\": \"path\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": false,\n            \"sources\": null,\n            \"separator\": null,\n            \"entryIndex\": 0\n          },\n          {\n            \"defaultValue\": \"*/300000\",\n            \"label\": \"trigger_expression\",\n            \"originalName\": \"trigger_expression\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"sources\": null,\n            \"separator\": null,\n            \"entryIndex\": 1\n          },\n          {\n            \"defaultValue\": \"5-50\",\n            \"label\": \"num_of_occurences_range\",\n            \"originalName\": \"num_of_occurences_range\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"sources\": null,\n            \"separator\": null,\n            \"entryIndex\": 2\n          },\n          {\n            \"defaultValue\": \"1-10\",\n            \"label\": \"roi_range\",\n            \"originalName\": \"roi_range\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"sources\": null,\n            \"separator\": null,\n            \"entryIndex\": 3\n          }\n        ],\n        \"outputs\": [],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ]\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"UPDATE DEMO ENVIRONMENT\",\n        \"description\": \"Downloads and triggers the latest available update from GitHub repository. Please note, triggering this flow will lead to permanent change of the demo environment and may lead to your data loss. Do not run if you are not familiar with the consequences. For the latest update and its description, navigate to the update repository: https://github.com/rpa-micro-focus/rpa-demo-updater/releases\",\n        \"flowVo\": {\n          \"flowPath\": \"Library/io/cloudslang/microfocus/demo/rpa/update/download_latest_update.sl\",\n          \"flowUuid\": \"io.cloudslang.microfocus.demo.rpa.update.download_latest_update\",\n          \"timeoutValue\": 0\n        },\n        \"inputs\": [\n          {\n            \"defaultValue\": \"rpa-micro-focus/rpa-demo-updater\",\n            \"label\": \"github_repo\",\n            \"originalName\": \"github_repo\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": false,\n            \"entryIndex\": 0,\n            \"initial\": {\n              \"required\": true\n            }\n          },\n          {\n            \"defaultValue\": \"io.cloudslang.microfocus.demo.rpa.update.update_rpa_demo\",\n            \"label\": \"updater_flow\",\n            \"originalName\": \"updater_flow\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": false,\n            \"entryIndex\": 1,\n            \"initial\": {\n              \"required\": true\n            }\n          },\n          {\n            \"defaultValue\": \"*/120000\",\n            \"label\": \"trigger_expression\",\n            \"originalName\": \"trigger_expression\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": false,\n            \"entryIndex\": 2,\n            \"initial\": {\n              \"required\": true\n            }\n          }\n        ],\n        \"outputs\": [],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ]\n      }\n    ],\n    [\n      {\n        \"name\": \"SALESFORCE\",\n        \"description\": \"Sales & Force\",\n        \"backgroundId\": 200071,\n        \"iconId\": 200025\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"CREATE AN ORDER\",\n        \"description\": \"Creates an order in Salesforce\",\n        \"inputs\": [\n          {\n            \"label\": \"username\",\n            \"originalName\": \"username\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"password\",\n            \"originalName\": \"password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"account_name\",\n            \"originalName\": \"account_name\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"order_date\",\n            \"originalName\": \"order_date\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"contract_number\",\n            \"originalName\": \"contract_number\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"description\",\n            \"originalName\": \"description\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          }\n        ],\n        \"outputs\": [\n          {\n            \"label\": \"order_number\",\n            \"originalName\": \"order_number\",\n            \"exposed\": true\n          },\n          {\n            \"label\": \"return_result\",\n            \"originalName\": \"return_result\",\n            \"exposed\": true\n          },\n          {\n            \"label\": \"error_message\",\n            \"originalName\": \"error_message\",\n            \"exposed\": true\n          }\n        ],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ],\n        \"flowVo\": {\n          \"flowUuid\": \"Salesforce.Order_flow\",\n          \"persistenceLevel\": \"STANDARD\",\n          \"timeoutValue\": 0,\n          \"flowPath\": \"Library/Salesforce/Order_flow.sl\"\n        }\n      }\n    ],\n    [\n      {\n        \"name\": \"SAP\",\n        \"description\": \"System Analysis and Program Development\",\n        \"backgroundId\": 200061,\n        \"iconId\": 200047\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"CONFIGURE USER\",\n        \"description\": \"Creates a user or sets its properties if the user already exists. It can reuse old data (if the user has been deleted) and also set the permanent password. If creating a new user, last name and temporal password (initial) is mandatory. If changing the permanent password of an existing user, it may set another than the wanted value (if the wanted password does not follow the SAP password policy for repeated values).\",\n        \"inputs\": [\n          {\n            \"label\": \"sap_connection\",\n            \"originalName\": \"sap_connection\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"INTERNAL\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"sap_admin_name\",\n            \"originalName\": \"sap_admin_name\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"sap*\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"sap_admin_password\",\n            \"originalName\": \"sap_admin_password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"Appl1ance\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"user_name\",\n            \"originalName\": \"user_name\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": \"\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"first_name\",\n            \"originalName\": \"first_name\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": \"\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"last_name\",\n            \"originalName\": \"last_name\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": \"\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"email\",\n            \"originalName\": \"email\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"temp_password\",\n            \"originalName\": \"temp_password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"password\",\n            \"originalName\": \"password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"profile\",\n            \"originalName\": \"profile\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"reuse_old_data\",\n            \"originalName\": \"reuse_old_data\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"title\",\n            \"originalName\": \"title\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"academic_title\",\n            \"originalName\": \"academic_title\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"language\",\n            \"originalName\": \"language\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"function\",\n            \"originalName\": \"function\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"department\",\n            \"originalName\": \"department\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"room\",\n            \"originalName\": \"room\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"floor\",\n            \"originalName\": \"floor\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"building\",\n            \"originalName\": \"building\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"phone\",\n            \"originalName\": \"phone\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"phone_ext\",\n            \"originalName\": \"phone_ext\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"mobile\",\n            \"originalName\": \"mobile\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"fax\",\n            \"originalName\": \"fax\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"fax_ext\",\n            \"originalName\": \"fax_ext\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"method\",\n            \"originalName\": \"method\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"start_menu\",\n            \"originalName\": \"start_menu\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"logon_language\",\n            \"originalName\": \"logon_language\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"decimal_notation\",\n            \"originalName\": \"decimal_notation\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"date_format\",\n            \"originalName\": \"date_format\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"time_format\",\n            \"originalName\": \"time_format\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"time_zone\",\n            \"originalName\": \"time_zone\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          }\n        ],\n        \"outputs\": [\n          {\n            \"label\": \"user_status\",\n            \"originalName\": \"user_status\",\n            \"exposed\": true\n          },\n          {\n            \"label\": \"user_password\",\n            \"originalName\": \"user_password\",\n            \"exposed\": true\n          },\n          {\n            \"label\": \"return_result\",\n            \"originalName\": \"return_result\",\n            \"exposed\": true\n          },\n          {\n            \"label\": \"error_message\",\n            \"originalName\": \"error_message\",\n            \"exposed\": true\n          }\n        ],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ],\n        \"flowVo\": {\n          \"flowUuid\": \"SAP.user.configure_user\",\n          \"persistenceLevel\": \"STANDARD\",\n          \"timeoutValue\": 0,\n          \"flowPath\": \"Library/SAP/user/configure_user.sl\"\n        }\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"INSTALL SAP\",\n        \"description\": \"Installs SAP on the built-in CentOS VM. It may take 20-30 mins to finish.\",\n        \"inputs\": [\n          {\n            \"label\": \"host\",\n            \"originalName\": \"host\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"sapdemo.mf-te.com\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"username\",\n            \"originalName\": \"username\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"centos\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"password\",\n            \"originalName\": \"password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": true,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"go.MF.admin123!\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"install_path\",\n            \"originalName\": \"install_path\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"/install/sapinst/install.sh\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"log_path\",\n            \"originalName\": \"log_path\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"/tmp/install-sap.log\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"timeout\",\n            \"originalName\": \"timeout\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"7200000\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"SAP users password (linux account)\",\n            \"originalName\": \"sap_password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"Cloud123\",\n            \"sources\": null,\n            \"separator\": null\n          }\n        ],\n        \"outputs\": [],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ],\n        \"flowVo\": {\n          \"flowUuid\": \"SAP.system.install_sap\",\n          \"persistenceLevel\": \"STANDARD\",\n          \"timeoutValue\": 0,\n          \"flowPath\": \"Library/SAP/system/install_sap.sl\"\n        }\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"PREPARE NEW SAP INSTANCE\",\n        \"description\": \"Installs and configure SAP server for the first use on the built-in CentOS VM. It installs SAP server, enables SAP user scripting (sets sapgui/user_scripting profile parameter to true), sets the default company address and creates an admin user. It may take up to 30 mins to finish (SAP installation itself takes 20-30 mins).\",\n        \"inputs\": [\n          {\n            \"label\": \"sap_connection\",\n            \"originalName\": \"sap_connection\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"INTERNAL\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"company_name\",\n            \"originalName\": \"company_name\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"ITELO\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"first_user_name\",\n            \"originalName\": \"first_user_name\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"admin\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"first_user_password\",\n            \"originalName\": \"first_user_password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": false,\n            \"defaultValue\": null,\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"skip_installation\",\n            \"originalName\": \"skip_installation\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"false\",\n            \"sources\": null,\n            \"separator\": null\n          }\n        ],\n        \"outputs\": [\n          {\n            \"label\": \"online\",\n            \"originalName\": \"online\",\n            \"exposed\": true\n          },\n          {\n            \"label\": \"company_status\",\n            \"originalName\": \"company_status\",\n            \"exposed\": true\n          },\n          {\n            \"label\": \"user_status\",\n            \"originalName\": \"user_status\",\n            \"exposed\": true\n          },\n          {\n            \"label\": \"user_password\",\n            \"originalName\": \"user_password\",\n            \"exposed\": true\n          }\n        ],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ],\n        \"flowVo\": {\n          \"flowUuid\": \"SAP.demo.prepare_instance\",\n          \"persistenceLevel\": \"STANDARD\",\n          \"timeoutValue\": 0,\n          \"flowPath\": \"Library/SAP/demo/prepare_instance.sl\"\n        }\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"UNINSTALL SAP\",\n        \"description\": \"Uninstalls built-in SAP (CentOS VM).\",\n        \"inputs\": [\n          {\n            \"label\": \"host\",\n            \"originalName\": \"host\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"sapdemo.mf-te.com\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"username\",\n            \"originalName\": \"username\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"centos\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"password\",\n            \"originalName\": \"password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": true,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"go.MF.admin123!\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"log_path\",\n            \"originalName\": \"log_path\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"/tmp/uninstall-sap.log\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"timeout\",\n            \"originalName\": \"timeout\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": false,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"300000\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"SAP users password (linux account)\",\n            \"originalName\": \"sap_password\",\n            \"type\": \"CREDENTIAL\",\n            \"required\": true,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"Cloud123\",\n            \"sources\": null,\n            \"separator\": null\n          },\n          {\n            \"label\": \"reboot\",\n            \"originalName\": \"reboot\",\n            \"type\": \"STRING\",\n            \"required\": false,\n            \"exposed\": true,\n            \"hasDefaultValue\": true,\n            \"defaultValue\": \"false\",\n            \"sources\": null,\n            \"separator\": null\n          }\n        ],\n        \"outputs\": [],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ],\n        \"flowVo\": {\n          \"flowUuid\": \"SAP.system.uninstall_sap\",\n          \"persistenceLevel\": \"STANDARD\",\n          \"timeoutValue\": 0,\n          \"flowPath\": \"Library/SAP/system/uninstall_sap.sl\"\n        }\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"START SAP\",\n        \"description\": \"Performs a list of linux OS level commands to start SAP services\",\n        \"flowVo\": {\n          \"flowPath\": \"Library/SAP/system/cmdline/start_sap.sl\",\n          \"flowUuid\": \"SAP.system.cmdline.start_sap\",\n          \"timeoutValue\": 0\n        },\n        \"inputs\": [],\n        \"outputs\": [],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ]\n      },\n      {\n        \"categoryId\": \"%s\",\n        \"name\": \"STOP SAP\",\n        \"description\": \"Performs a list of linux OS level commands to stop SAP services in safe manner\",\n        \"flowVo\": {\n          \"flowPath\": \"Library/SAP/system/cmdline/stop_sap.sl\",\n          \"flowUuid\": \"SAP.system.cmdline.stop_sap\",\n          \"timeoutValue\": 0\n        },\n        \"inputs\": [],\n        \"outputs\": [],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ]\n      },\n      {\n        \"name\": \"CREATE USERS\",\n        \"description\": \"Creates up to 1000 SAP users from given excel sheet. The sheet must have a header where each property is written in one column. Name (containing the first name and the last name) is in a single column; the names must be delimited by a white space character.\",\n        \"categoryId\": \"%s\",\n        \"flowVo\": {\n          \"flowPath\": \"Library/SAP/user/bulk/create_users_from_excel.sl\",\n          \"flowUuid\": \"SAP.user.bulk.create_users_from_excel\",\n          \"timeoutValue\": 0\n        },\n        \"inputs\": [\n          {\n            \"defaultValue\": \"C:\\\\Temp\\\\Excel.xlsx\",\n            \"label\": \"excel_file\",\n            \"originalName\": \"excel_file\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"entryIndex\": 0,\n            \"initial\": {\n              \"required\": true\n            }\n          },\n          {\n            \"defaultValue\": \"Environment\",\n            \"label\": \"worksheet_name\",\n            \"originalName\": \"worksheet_name\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"entryIndex\": 1,\n            \"initial\": {\n              \"required\": true\n            }\n          },\n          {\n            \"defaultValue\": \"SAP User\",\n            \"label\": \"username_header\",\n            \"originalName\": \"username_header\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"entryIndex\": 2,\n            \"initial\": {\n              \"required\": true\n            }\n          },\n          {\n            \"defaultValue\": \"SAP Password\",\n            \"label\": \"password_header\",\n            \"originalName\": \"password_header\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"entryIndex\": 3,\n            \"initial\": {\n              \"required\": true\n            }\n          },\n          {\n            \"defaultValue\": \"Name\",\n            \"label\": \"name_header\",\n            \"originalName\": \"name_header\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"entryIndex\": 4,\n            \"initial\": {\n              \"required\": true\n            }\n          },\n          {\n            \"defaultValue\": \"E-mail\",\n            \"label\": \"email_header\",\n            \"originalName\": \"email_header\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"entryIndex\": 5,\n            \"initial\": {\n              \"required\": true\n            }\n          },\n          {\n            \"defaultValue\": \"true\",\n            \"label\": \"set_admin\",\n            \"originalName\": \"set_admin\",\n            \"type\": \"STRING\",\n            \"required\": true,\n            \"exposed\": true,\n            \"entryIndex\": 6,\n            \"initial\": {\n              \"required\": true\n            }\n          }\n        ],\n        \"outputs\": [],\n        \"roles\": [\n          \"ADMINISTRATOR\",\n          \"PROMOTER\"\n        ]\n      }\n    ]\n  ]\n'''}"
  workflow:
    - get_token:
        do:
          io.cloudslang.microfocus.rpa.ssx.authenticate.get_token: []
        publish:
          - token
        navigate:
          - FAILURE: on_failure
          - SUCCESS: escape_json
    - escape_json:
        do:
          io.cloudslang.base.utils.sleep:
            - seconds: '0'
            - categories: '${categories}'
        publish:
          - processed_categories: "${categories.replace(\"'\",\"__QUOTE__\").replace(\": null\", \": '__NULL__'\").replace(\": true\", \": '__TRUE__'\").replace(\": false\", \": '__FALSE__'\")}"
        navigate:
          - SUCCESS: get_categories
          - FAILURE: on_failure
    - update_category_scenarios:
        loop:
          for: category in eval(processed_categories)
          do:
            io.cloudslang.microfocus.rpa.demo.sub_flows.update_category_scenarios:
              - token: '${token}'
              - category_json: '${str(category[0])}'
              - scenarios_json: '${str(category[1:])}'
              - existing_categories_json: '${existing_categories_json}'
              - existing_scenarios_json: '${existing_scenarios_json}'
          break:
            - FAILURE
        navigate:
          - FAILURE: on_failure
          - SUCCESS: SUCCESS
    - get_categories:
        do:
          io.cloudslang.microfocus.rpa.ssx.category.get_categories:
            - token: '${token}'
        publish:
          - existing_categories_json: '${categories_json}'
        navigate:
          - FAILURE: on_failure
          - SUCCESS: get_scenarios
    - get_scenarios:
        do:
          io.cloudslang.microfocus.rpa.ssx.scenario.get_scenarios:
            - token: '${token}'
        publish:
          - existing_scenarios_json: '${scenarios_json}'
        navigate:
          - FAILURE: on_failure
          - SUCCESS: update_category_scenarios
  results:
    - FAILURE
    - SUCCESS
extensions:
  graph:
    steps:
      get_token:
        x: 107
        'y': 123
      escape_json:
        x: 103
        'y': 297
      update_category_scenarios:
        x: 265
        'y': 295
        navigate:
          9cbfac69-5494-bda6-d123-884d49c9ac73:
            targetId: 8ce4c69c-e2dd-917a-b954-5b1eb611845e
            port: SUCCESS
      get_categories:
        x: 271
        'y': 133
      get_scenarios:
        x: 417
        'y': 134
    results:
      SUCCESS:
        8ce4c69c-e2dd-917a-b954-5b1eb611845e:
          x: 422
          'y': 302
